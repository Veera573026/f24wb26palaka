doctype html
html
  head
    title Plants
    link(rel="stylesheet", href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css")
  body
    h1 Plants

    .container-fluid
      .row
        //- Step 1: Define the array in unbuffered server-side code
        -
          const results = [
    { plant_name: "Cactus", plant_type: "Succulent", plant_age: 5 },
    { plant_name: "Rose", plant_type: "Flower", plant_age: 2 },
    { plant_name: "Oak Tree", plant_type: "Tree", plant_age: 50 }
  ];

        //- Step 5: Iterate over each item in results with index
        each item, index in results
          .col-sm-2
            h2 #{item.plant_name}
            p type of the plant: #{item.plant_type}
            p Age: #{item.plant_age} years
            button(class="buy-btn" data-index=index data-name=item.plant_name) Buy

    // Add a script to bind events for the buy buttons
    script.
      document.addEventListener('DOMContentLoaded', function() {
        const buyButtons = document.querySelectorAll('.buy-btn');
        buyButtons.forEach(button => {
          button.addEventListener('click', function() {
            const index = button.getAttribute('data-index');
            const name = button.getAttribute('data-name');
            buy(index, name);
          });
        });
      });

      function buy(index, name) {
        alert("You purchased item " + index + ": " + name);
      }